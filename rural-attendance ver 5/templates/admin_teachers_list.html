{% extends "base.html" %}
{% block content %}
<section class="card">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
    <h2 style="margin:0">Teachers</h2>
    <div style="display:flex;gap:8px;align-items:center">
      <form method="get" action="{{ url_for('admin_teachers_list') }}">
        <label for="school_id" style="font-size:14px;color:var(--muted)">School:</label>
        <select name="school_id" id="school_id"
                onchange="this.form.submit()"
                style="padding:8px 10px;border:1px solid var(--border);border-radius:8px;background:#fff">
          <option value="">All</option>
          {% for s in schools %}
            <option value="{{ s.id }}" {% if selected_school_id==s.id %}selected{% endif %}>{{ s.name }}</option>
          {% endfor %}
        </select>
      </form>
      <a class="btn btn-primary" href="{{ url_for('admin_teachers_new') }}">Add Teacher</a>
    </div>
  </div>

  {% if teachers %}
    <div style="overflow:auto;margin-top:12px">
      <table style="width:100%;border-collapse:collapse">
        <thead>
          <tr style="text-align:left;border-bottom:1px solid var(--border)">
            <th style="padding:10px">Name</th>
            <th style="padding:10px">Email</th>
            <th style="padding:10px">Phone</th>
            <th style="padding:10px">School</th>
            <th style="padding:10px">Created</th>
            <th style="padding:10px">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for t in teachers %}
          <tr style="border-bottom:1px solid var(--border)">
            <td style="padding:10px">{{ t.name }}</td>
            <td style="padding:10px">{{ t.email }}</td>
            <td style="padding:10px">{{ t.phone or 'â€”' }}</td>
            <td style="padding:10px">{{ t.school_name }}</td>
            <td style="padding:10px">{{ t.created_at }}</td>
            <td style="padding:10px;white-space:nowrap">
            <a class="btn btn-ghost"
                href="{{ url_for('admin_teachers_edit', teacher_id=t.id, school_id=selected_school_id) }}">Edit</a>

            <form method="post"
                    action="{{ url_for('admin_teachers_delete', teacher_id=t.id) }}"
                    style="display:inline"
                    onsubmit="return confirm('Delete this teacher?');">
                <input type="hidden" name="school_id" value="{{ selected_school_id or t.school_id }}">
                <button class="btn btn-ghost" type="submit">Delete</button>
            </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p style="margin-top:12px;color:var(--muted)">No teachers found.</p>
  {% endif %}
</section>
{% endblock %}
