{% extends "base.html" %}
{% block content %}
<section class="card">
  <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
    <h2 style="margin:0">Students — {{ cls.school_name if cls.school_name else '' }} {{ cls.name }} / {{ sec.name }}</h2>
    <a class="btn btn-primary" href="{{ url_for('admin_students_new', class_id=cls.id, section_id=sec.id) }}">Add Student</a>
  </div>

  {% if students %}
  <table style="width:100%;border-collapse:collapse;margin-top:12px">
    <thead>
      <tr style="text-align:left;border-bottom:1px solid var(--border)">
        <th style="padding:10px">Roll</th>
        <th style="padding:10px">Name</th>
        <th style="padding:10px">Admission #</th>
        <th style="padding:10px">DOB</th>
        <th style="padding:10px">Guardian</th>
        <th style="padding:10px">Phone</th>
        <th style="padding:10px">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for s in students %}
      <tr style="border-bottom:1px solid var(--border)">
        <td style="padding:10px">{{ s.roll_no or '—' }}</td>
        <td style="padding:10px">{{ s.name }}</td>
        <td style="padding:10px">{{ s.admission_no or '—' }}</td>
        <td style="padding:10px">{{ s.dob or '—' }}</td>
        <td style="padding:10px">{{ s.guardian_name or '—' }}</td>
        <td style="padding:10px">{{ s.guardian_phone or '—' }}</td>
        <td style="padding:10px;white-space:nowrap">
          <a class="btn btn-ghost" href="{{ url_for('admin_students_edit', student_id=s.id) }}">Edit</a>
          <form method="post" action="{{ url_for('admin_students_delete', student_id=s.id) }}"
                style="display:inline" onsubmit="return confirm('Delete this student?');">
            <button class="btn btn-ghost" type="submit">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p style="margin-top:12px;color:var(--muted)">No students in this section yet.</p>
  {% endif %}

  <div style="margin-top:12px">
    <a class="btn btn-ghost" href="{{ url_for('admin_sections_list', class_id=cls.id) }}">← Back to Sections</a>
  </div>
</section>
{% endblock %}
